# Tmux Configuration

# ------------------------------------------------------------------------------
# General
# ------------------------------------------------------------------------------

# Improve colors
set -g default-terminal 'screen-256color'

# Enable true color support
set -as terminal-features ',xterm-256color:RGB'

# Increase scrollback buffer
set -g history-limit 50000

# Start window and pane numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Don't rename windows automatically
set -g allow-rename off

# Enable mouse support
set -g mouse on

# Reduce escape time for vim
set -sg escape-time 10

# Focus events for vim autoread
set -g focus-events on

# ------------------------------------------------------------------------------
# Prefix Key
# ------------------------------------------------------------------------------

# Use Ctrl+s as prefix (easier to reach than Ctrl+b)
set -g prefix2 C-s
bind C-s send-prefix -2

# Keep Ctrl+b as secondary prefix
# set -g prefix C-b

# ------------------------------------------------------------------------------
# Key Bindings
# ------------------------------------------------------------------------------

# Act like vim
setw -g mode-keys vi
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Switch windows with Ctrl+h/l
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# Split panes using | and -
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# New window in current path
bind c new-window -c "#{pane_current_path}"

# Reload config
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

# Copy mode vim-style
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"

# ------------------------------------------------------------------------------
# Status Bar
# ------------------------------------------------------------------------------

# Soften status bar color
set -g status-style bg='#333333',fg='#aaaaaa'

# Clean status bar
set -g status-left ''
set -g status-right ''

# Center window list
set -g status-justify centre

# ------------------------------------------------------------------------------
# Local config
# ------------------------------------------------------------------------------

if-shell "[ -f ~/.tmux.conf.local ]" 'source ~/.tmux.conf.local'
